!function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}new(function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.gui=t,this.modalControl=this.modalControl.bind(this),this.listControl=this.listControl.bind(this),this.ind=null,this.goods=[{id:111,title:"IPhone XR",price:6e4},{id:112,title:"Geforce 3090",price:3e5},{id:113,title:"Macbook M1",price:2e5}],this.id=114}var i,n,o;return i=e,(n=[{key:"init",value:function(){this.gui.drawRows(this.goods),this.gui.widget.addEventListener("click",this.listControl),this.gui.modal.addEventListener("click",this.modalControl)}},{key:"modalControl",value:function(t){if(t&&t.preventDefault(),"cancel"===t.target.name)this.gui.hideModal();else if("save"===t.target.name){var e=this.gui.modalInputs[0].value,i=this.gui.modalInputs[1].value;"add"===this.gui.modalAction?this.goods.push({id:this.id,title:e,price:i}):"edit"===this.gui.modalAction&&(this.goods[this.ind].title=e,this.goods[this.ind].price=i),this.gui.hideModal()}}},{key:"listControl",value:function(t){var e=t.target.className;if(t.target.closest("tr")){var i=t.target.closest("tr").dataset.id;this.ind=this.goods.findIndex((function(t){return t.id===+i}))}switch(e){case"del":this.goods.splice(this.ind,1);break;case"edit":this.gui.showModal(this.goods[this.ind],"edit");break;case"add":this.gui.showModal({title:"",price:""},"add")}this.gui.drawRows(this.goods)}}])&&t(i.prototype,n),o&&t(i,o),e}())(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.widget=document.querySelector(".widget"),this.tbody=this.widget.querySelector("tbody"),this.modal=this.widget.querySelector(".modal"),this.modalInputs=null,this.modalAction=null}var i,o,a;return i=t,(o=[{key:"rowTemplate",value:function(t,e,i){return'\n    <tr data-id="'.concat(t,'">\n      <td>').concat(e,"</td>\n      <td>").concat(i,'</td>\n      <td><span class="edit">✏️</span> <span class="del">✖</span></td>\n    </tr>\n    ')}},{key:"drawRows",value:function(t){var e=this;this.tbody.innerHTML="",t.forEach((function(t){e.tbody.innerHTML+=e.rowTemplate(t.id,t.title,t.price)}))}},{key:"showModal",value:function(t,i){this.modal.classList.add("center"),this.modal.classList.remove("hidden"),this.modal.innerHTML='\n    <form action="submit" name="'.concat(i,'">\n      <div>\n        Name<input name="title" type="text" value="').concat(t.title,'">\n      </div>\n      <div>\n        Price<input name="price" type="text" value="').concat(t.price,'">\n      </div>\n      <div>\n        <button type="submit" name="save">Save</button>\n        <button type="reset" name="cancel">Cancel</button>\n      </div>\n    </form>\n    '),this.modalInputs=e(this.modal.querySelectorAll("input")),this.modalAction=i}},{key:"hideModal",value:function(){this.modal.classList.remove("center"),this.modal.classList.add("hidden")}}])&&n(i.prototype,o),a&&n(i,a),t}())).init()}();